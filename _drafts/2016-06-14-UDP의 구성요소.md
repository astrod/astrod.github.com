---
title: "UDP의 구성요소"
tags:
- network
---

# 들어가며
이 포스팅은 <<구글 엔지니어에게 듣는 네트워킹과 웹 성능 최적화 기법>>의 3장, UDP의 구성요소를 요약한 것입니다.

# UDP의 구성요소
UDP는 기존 TCP/IP 프로토콜이 소개된 지 한참 지난 1980년 8월에 핵심 네트워크 프로토콜에 추가되었다. UDP의 특징은 다채로운 기능이 아닌, 많은 기능의 과감한 생략, 즉 단순함에 있다. UDP는 흔히 널 프로토콜이라고 불리며, UFC 768은 냅킨 한 장에 채워 넣을만큼 간단하다.

## 데이터그램
- 전송 네트워크 계층에서 보장하는 신뢰 기반의 데이터 교환에 의존하지 않고, 충반한 양의 정보를 발신지에서 목적지까지 스스로 운반할 수 있는 독립적인 데이터 개체

데이터그램과 패킷이란 단어는 혼용하는 경우가 많지만, 그 의미에는 차이가 있다. 패킷이 일반적인 데이터 덩어리를 지칭한다면, 데이터그램은 데이터를 전송하는 방식이 불안정하고, 실패에 대한 노티도 없는, 신뢰할 수 없는 서비스를 통해 전달되는 패킷을 지칭한다.

따라서 UDP 패킷은 데이터그렘이라 칭하는 것이 옳다.

UDP가 사용되는 대표적인 예는 DNS일 것이다. 브라우저는 데이터 교환을 하기 전에 먼저 DNS를 통하여 컴퓨터의 IP주소를 알아내야 한다. 브라우저는 UDP에 의존하고 있지만, 웹 페이지나 웹 어플리케이션은 UDP를 데이터 전송 수단으로 사용하지는 않았다. 그러나 WebRTC가 등장하고부터는 상황이 달라졌다.

## Null 프로토콜 서비스
UDP가 null 프로토콜 서비스라고 불리는 이유를 알기 위해서는, IP계층에 대해 알아봐야 한다. IP 계층의 주된 임무는 발신지와 수신지 주소를 기반으로, 데이터그램을 운반하는 것이다. 전달하고자 하는 메시지는 IP 패킷 안에 포함되고, 이 IP 패킷은 발신지와 수신지의 주소, 그리고 그 밖의 다른 라우팅 파라미터 정보를 담고 있다.

다시 말하여, '데이타그램'이라는 명칭을 사용하는 이유는 IP계층이 메시지를 안전하게 전달하지도 않고, 메시지 전송에 실패한 경우에도 실패 통지를 하지 않기 때문이다. 이는 위 계층에게 그대로 해당 네트워크의 불확실성을 드러내는 일이다. 따라서 라우팅 노드가 혼잡이나 혹은 다른 어떤 이유로든 IP패킷을 누락할 경우, IP보다 위 계층에서 누락한 패킷을 복구하고 데이터를 재전송하여야 한다.

UPD 프로토콜은 사용자 메시지를 정의된 패킷 구조에 저장하는데, 이 구조는 발신지 포트, 수신지 포트, 패킷의 길이와 체크섬이라는 네 필드로 구성되어 있다.

![UDP_Header]({{ site.url }}/asset/2016-06-18 16.28.37.jpg)

위의 그림을 보면, 패킷 구조는 발신지 포트, 수신지 포트, 패킷의 길이와 체크섬 이렇게 네 가지로 이루어져 있다.

그러나, 발신지 포트와 체크섬 포트 모두 UDP 데이터그램에서는 선택 입력 필드이다. IP패킷은 자체적으로 헤더 체큿머을 포함하고 있기 때문이다. 즉, 이 말은 UDP에서의 에러 탐지와 에러 복구가 그 위 계층 애플리케이션에서 이루어진다는 의미이다. 정리하면 다음과 같다.

- 메시지를 무사히 운반할 수 있다는 보장 없음

Ack, 재전송, 타임아웃 없음

- 메시지를 순서대로 운반할 수 없음

패킷 시퀀스 넘버, 재정렬, Head-of-line(HOL), 블로킹 없음

- 커넥션 상태 트래킹 없음

커넥션 성립 혹은 종료 메커니즘 없음

- 혼잡 제어 없음

내장된 클라이언트나 네트워크 피드백 메커니즘 없음


